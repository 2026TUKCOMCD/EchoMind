<!-- 4. Matching Tab -->
<div x-show="activeTab === 'matching'" style="display: none;" x-data="dummyManager" x-init="init()">

    <div class="space-y-6">

        <!-- 1. ÏÇ¨Ïö©Ïûê Îß§Ïπ≠ ÏãúÎÆ¨Î†àÏù¥ÏÖò (Top) -->
        <!-- ÌÜµÌï© ÏãúÎÆ¨Î†àÏù¥ÏÖò ÏÑπÏÖò -->
        <div class="mt-4 pt-4">
            <div class="flex items-center gap-2 mb-4">
                <h3 class="font-bold text-lg text-slate-800 dark:text-white">üß™ ÏÇ¨Ïö©Ïûê Îß§Ïπ≠ ÏãúÎÆ¨Î†àÏù¥ÏÖò</h3>
                <span class="text-sm text-slate-500 dark:text-slate-400 font-normal">ÏÑ†ÌÉùÎêú ÏÇ¨Ïö©Ïûê(2Î™Ö)Ïùò Îß§Ïπ≠ Ï†êÏàòÎ•º Ïã§ÏãúÍ∞ÑÏúºÎ°ú
                    Í≥ÑÏÇ∞Ìï©ÎãàÎã§.</span>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- ÏôºÏ™Ω: ÏãúÎÆ¨Î†àÏù¥ÏÖò Ïª®Ìä∏Î°§ Ìå®ÎÑê (Unified) -->
                <div class="bg-white p-6 rounded-2xl border border-slate-200 dark:bg-slate-800 dark:border-slate-700">
                    <h4 class="font-bold text-base text-indigo-700 mb-4 flex items-center gap-2">
                        <span>üé≤ ÏãúÎÆ¨Î†àÏù¥ÏÖò ÏÑ§Ï†ï</span>
                        <span
                            class="text-xs bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-300 px-2 py-0.5 rounded-full font-bold border border-indigo-200 dark:border-indigo-800">Real-time</span>
                    </h4>

                    <!-- ÏÑ†ÌÉùÎêú ÏÇ¨Ïö©Ïûê ÌëúÏãú -->
                    <div
                        class="bg-white dark:bg-slate-900/50 p-4 rounded-xl shadow-sm mb-6 border border-indigo-50 dark:border-slate-700">
                        <div class="flex items-center justify-between mb-2">
                            <span
                                class="text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider">Selected
                                Users</span>
                            <span class="text-xs text-indigo-500 font-bold"
                                x-show="selectedIds.length === 2">Ready</span>
                        </div>
                        <div class="space-y-2">
                            <!-- User A - Enhanced -->
                            <div class="flex items-start gap-2 p-2 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-100 dark:border-slate-700 transition-all"
                                :class="selectedIds.length > 0 ? 'bg-indigo-50/50 dark:bg-indigo-900/20 border-indigo-100 dark:border-indigo-800' : ''">
                                <div
                                    class="w-8 h-8 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center text-sm font-bold flex-shrink-0">
                                    A</div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-center justify-between mb-1">
                                        <input type="text" :value="getSelectedName(0)" readonly placeholder="ÏÇ¨Ïö©Ïûê A ÏÑ†ÌÉù"
                                            class="bg-transparent border-none text-sm font-bold text-slate-800 dark:text-white w-full focus:ring-0 p-0 cursor-default placeholder:font-normal placeholder:text-slate-400">
                                        <button @click="removeFromSimulation(selectedIds[0])"
                                            x-show="selectedIds.length > 0"
                                            class="text-slate-400 hover:text-red-500 hover:bg-red-50 rounded p-0.5 ml-1 transition-colors">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                    d="M6 18L18 6M6 6l12 12"></path>
                                            </svg>
                                        </button>
                                    </div>
                                    <!-- Stats Preview -->
                                    <template x-if="getSelectedInfo(0)">
                                        <div class="mt-1">
                                            <div class="flex gap-1.5 flex-wrap mb-1.5">
                                                <span
                                                    class="px-1.5 py-0.5 rounded bg-white dark:bg-slate-700 border border-indigo-200 dark:border-indigo-800 text-[10px] font-bold text-indigo-700 dark:text-indigo-300 tracking-wide"
                                                    x-text="getSelectedInfo(0).mbti || 'N/A'"></span>
                                                <span
                                                    class="px-1.5 py-0.5 rounded bg-white dark:bg-slate-700 border border-rose-200 dark:border-rose-800 text-[10px] font-bold text-rose-700 dark:text-rose-300 tracking-wide"
                                                    x-text="getSelectedInfo(0).socionics || 'N/A'"></span>
                                            </div>
                                            <!-- Big 5 Mini Bars (OCEAN) -->
                                            <div class="grid grid-cols-5 gap-0.5 w-full h-8"
                                                x-show="getSelectedInfo(0).big5">
                                                <template x-for="(val, key) in getSelectedInfo(0).big5">
                                                    <div class="flex flex-col items-center justify-end h-full bg-slate-100/50 dark:bg-slate-950 rounded-sm hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors"
                                                        :title="getBig5Tooltip(key, val)">
                                                        <div class="w-full bg-indigo-400/80 dark:bg-indigo-500/80 rounded-t-sm"
                                                            :style="'height: ' + val + '%'"></div>
                                                        <span class="text-[8px] font-bold text-slate-400 mt-px"
                                                            x-text="getBig5Label(key)"></span>
                                                    </div>
                                                </template>
                                            </div>
                                        </div>
                                    </template>
                                    <template x-if="!getSelectedInfo(0)">
                                        <div class="text-[10px] text-slate-400 italic">Î™©Î°ùÏóêÏÑú ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</div>
                                    </template>
                                </div>
                            </div>
                            <!-- User B - Enhanced -->
                            <div class="flex items-start gap-2 p-2 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-100 dark:border-slate-700 transition-all"
                                :class="selectedIds.length > 1 ? 'bg-indigo-50/50 dark:bg-indigo-900/20 border-indigo-100 dark:border-indigo-800' : ''">
                                <div
                                    class="w-8 h-8 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center text-sm font-bold flex-shrink-0">
                                    B</div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-center justify-between mb-1">
                                        <input type="text" :value="getSelectedName(1)" readonly placeholder="ÏÇ¨Ïö©Ïûê B ÏÑ†ÌÉù"
                                            class="bg-transparent border-none text-sm font-bold text-slate-800 dark:text-white w-full focus:ring-0 p-0 cursor-default placeholder:font-normal placeholder:text-slate-400">
                                        <button @click="removeFromSimulation(selectedIds[1])"
                                            x-show="selectedIds.length > 1"
                                            class="text-slate-400 hover:text-red-500 hover:bg-red-50 rounded p-0.5 ml-1 transition-colors">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                    d="M6 18L18 6M6 6l12 12"></path>
                                            </svg>
                                        </button>
                                    </div>
                                    <!-- Stats Preview -->
                                    <template x-if="getSelectedInfo(1)">
                                        <div class="mt-1">
                                            <div class="flex gap-1.5 flex-wrap mb-1.5">
                                                <span
                                                    class="px-1.5 py-0.5 rounded bg-white dark:bg-slate-700 border border-indigo-200 dark:border-indigo-800 text-[10px] font-bold text-indigo-700 dark:text-indigo-300 tracking-wide"
                                                    x-text="getSelectedInfo(1).mbti || 'N/A'"></span>
                                                <span
                                                    class="px-1.5 py-0.5 rounded bg-white dark:bg-slate-700 border border-rose-200 dark:border-rose-800 text-[10px] font-bold text-rose-700 dark:text-rose-300 tracking-wide"
                                                    x-text="getSelectedInfo(1).socionics || 'N/A'"></span>
                                            </div>
                                            <!-- Big 5 Mini Bars (OCEAN) -->
                                            <div class="grid grid-cols-5 gap-0.5 w-full h-8"
                                                x-show="getSelectedInfo(1).big5">
                                                <template x-for="(val, key) in getSelectedInfo(1).big5">
                                                    <div class="flex flex-col items-center justify-end h-full bg-slate-100/50 dark:bg-black rounded-sm hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors"
                                                        :title="getBig5Tooltip(key, val)">
                                                        <div class="w-full bg-indigo-400/80 rounded-t-sm"
                                                            :style="'height: ' + val + '%'"></div>
                                                        <span class="text-[8px] font-bold text-slate-400 mt-px"
                                                            x-text="getBig5Label(key)"></span>
                                                    </div>
                                                </template>
                                            </div>
                                        </div>
                                    </template>
                                    <template x-if="!getSelectedInfo(1)">
                                        <div class="text-[10px] text-slate-400 italic">Î™©Î°ùÏóêÏÑú ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</div>
                                    </template>
                                </div>
                            </div>
                        </div>

                        <!-- ÏßÅÏ†ë ÏûÖÎ†• (ÏòµÏÖò) -->
                        <div class="mt-3 flex gap-2">
                            <input type="number" placeholder="ID ÏßÅÏ†ë ÏûÖÎ†•"
                                class="w-full text-xs px-2 py-1 rounded border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500">
                            <button
                                @click="addToSimulation($event.target.previousElementSibling.value); $event.target.previousElementSibling.value = ''"
                                class="px-3 py-1 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300 rounded-lg text-xs font-bold transition-colors">
                                Ï∂îÍ∞Ä
                            </button>
                        </div>
                    </div>

                    <!-- Í∞ÄÏ§ëÏπò Ï°∞Ï†à Ïä¨ÎùºÏù¥Îçî -->
                    <div class="space-y-4 mb-6">
                        <div class="border-b dark:border-slate-700 pb-3 mb-4 space-y-3">
                            <label class="font-bold text-base text-slate-800 dark:text-slate-200 block">Îß§Ïπ≠ Í∞ÄÏ§ëÏπò ÏÑ§Ï†ï (Ìï©Í≥Ñ
                                1.0)</label>
                            <button @click="resetWeights()"
                                class="w-full py-3 bg-white dark:bg-slate-900 border-2 border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 font-bold rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 hover:border-slate-300 dark:hover:border-slate-600 hover:text-indigo-600 dark:hover:text-indigo-400 transition-all shadow-sm flex items-center justify-center gap-2 text-sm">
                                <span class="text-lg">üîÑ</span> Í∞ÄÏ§ëÏπò Ï¥àÍ∏∞Ìôî
                            </button>
                        </div>

                        <!-- Similarity -->
                        <div>
                            <div class="flex justify-between text-xs mb-1 items-center">
                                <div class="flex items-center gap-2">
                                    <span class="font-medium text-slate-600">Similarity</span>
                                    <button @click="locked.sim = !locked.sim"
                                        class="focus:outline-none transition-colors"
                                        :class="locked.sim ? 'text-indigo-600' : 'text-slate-300'">
                                        <span x-show="locked.sim">üîí</span>
                                        <span x-show="!locked.sim">üîì</span>
                                    </button>
                                </div>
                                <span x-text="dummyWeights.sim.toFixed(2)"
                                    class="font-mono font-bold text-indigo-600"></span>
                            </div>
                            <input type="range" min="0" max="1" step="0.01" x-model.number="dummyWeights.sim"
                                @input="adjustDummyWeights('sim')" :disabled="locked.sim"
                                class="w-full h-2 bg-indigo-200 rounded-lg appearance-none cursor-pointer hover:bg-indigo-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                        </div>

                        <!-- Chemistry -->
                        <div>
                            <div class="flex justify-between text-xs mb-1 items-center">
                                <div class="flex items-center gap-2">
                                    <span class="font-medium text-slate-600">Chemistry</span>
                                    <button @click="locked.chem = !locked.chem"
                                        class="focus:outline-none transition-colors"
                                        :class="locked.chem ? 'text-indigo-600' : 'text-slate-300'">
                                        <span x-show="locked.chem">üîí</span>
                                        <span x-show="!locked.chem">üîì</span>
                                    </button>
                                </div>
                                <span x-text="dummyWeights.chem.toFixed(2)"
                                    class="font-mono font-bold text-rose-600"></span>
                            </div>
                            <input type="range" min="0" max="1" step="0.01" x-model.number="dummyWeights.chem"
                                @input="adjustDummyWeights('chem')" :disabled="locked.chem"
                                class="w-full h-2 bg-rose-200 rounded-lg appearance-none cursor-pointer hover:bg-rose-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                        </div>

                        <!-- Activity -->
                        <div>
                            <div class="flex justify-between text-xs mb-1 items-center">
                                <div class="flex items-center gap-2">
                                    <span class="font-medium text-slate-600">Activity</span>
                                    <button @click="locked.act = !locked.act"
                                        class="focus:outline-none transition-colors"
                                        :class="locked.act ? 'text-indigo-600' : 'text-slate-300'">
                                        <span x-show="locked.act">üîí</span>
                                        <span x-show="!locked.act">üîì</span>
                                    </button>
                                </div>
                                <span x-text="dummyWeights.act.toFixed(2)"
                                    class="font-mono font-bold text-amber-600"></span>
                            </div>
                            <input type="range" min="0" max="1" step="0.01" x-model.number="dummyWeights.act"
                                @input="adjustDummyWeights('act')" :disabled="locked.act"
                                class="w-full h-2 bg-amber-200 rounded-lg appearance-none cursor-pointer hover:bg-amber-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                        </div>
                    </div>

                    <template x-if="dummyError">
                        <div class="mt-4 p-4 bg-red-50 text-red-600 rounded-xl border border-red-100 text-sm font-medium"
                            x-text="dummyError"></div>
                    </template>
                </div>

                <!-- Ïò§Î•∏Ï™Ω: Í≤∞Í≥º ÌëúÏãú Ìå®ÎÑê -->
                <div
                    class="bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm h-fit">
                    <h4 class="font-bold text-base text-slate-800 dark:text-slate-200 mb-4">üìä ÏãúÎÆ¨Î†àÏù¥ÏÖò Í≤∞Í≥º</h4>

                    <div x-show="dummyResult" class="animate-fade-in-up" x-cloak>
                        <div class="text-center mb-6">
                            <div class="text-xs text-slate-500 font-bold uppercase tracking-wider mb-2">
                                Total Match Score</div>
                            <div class="text-6xl font-black text-indigo-600 mb-4" x-text="dummyResult.match_score">
                            </div>
                            <p class="text-sm text-slate-500" x-show="dummyResult.match_score >= 80">‚ú®
                                ÏïÑÏ£º Ï¢ãÏùÄ Í∂ÅÌï©ÏûÖÎãàÎã§!</p>
                            <p class="text-sm text-slate-500"
                                x-show="dummyResult.match_score < 80 && dummyResult.match_score >= 50">
                                üëå Î¨¥ÎÇúÌïú Í¥ÄÍ≥ÑÏûÖÎãàÎã§.</p>
                            <p class="text-sm text-slate-500" x-show="dummyResult.match_score < 50">‚ö†Ô∏è
                                ÎÖ∏Î†•Ïù¥ ÌïÑÏöîÌïú Í¥ÄÍ≥ÑÏûÖÎãàÎã§.</p>
                        </div>

                        <div
                            class="grid grid-cols-1 divide-y divide-slate-100 dark:divide-slate-700 bg-slate-50 dark:bg-slate-900/30 rounded-2xl border border-slate-100 dark:border-slate-700 mb-6 overflow-hidden">
                            <div
                                class="p-4 flex items-center justify-between group hover:bg-white dark:hover:bg-slate-800 transition-colors">
                                <div class="flex flex-col">
                                    <span
                                        class="text-[10px] font-black text-indigo-500 uppercase tracking-widest leading-none mb-1">Similarity</span>
                                    <span class="text-sm font-bold text-slate-700 dark:text-slate-200">ÏÑ±Ìñ• Ïú†ÏÇ¨ÎèÑ</span>
                                    <span class="text-[10px] text-slate-400">Big 5(Í∏∞Ïßà) Í∏∞Î∞ò Ïú†ÏÇ¨ÏÑ± Î∂ÑÏÑù</span>
                                </div>
                                <div class="text-right">
                                    <span class="text-2xl font-black text-indigo-600 dark:text-indigo-400"
                                        x-text="dummyResult.details ? (dummyResult.details.similarity_score * dummyWeights.sim * 300).toFixed(0) : '-'"></span>
                                    <span class="text-[10px] font-bold text-slate-400 block -mt-1">Impact pts</span>
                                </div>
                            </div>
                            <div
                                class="p-4 flex items-center justify-between group hover:bg-white dark:hover:bg-slate-800 transition-colors">
                                <div class="flex flex-col">
                                    <span
                                        class="text-[10px] font-black text-rose-500 uppercase tracking-widest leading-none mb-1">Chemistry</span>
                                    <span class="text-sm font-bold text-slate-700 dark:text-slate-200">ÏºÄÎØ∏Ïä§Ìä∏Î¶¨</span>
                                    <span class="text-[10px] text-slate-400">MBTI/ÏÜåÏãúÏò§ÎãâÏä§ Í¥ÄÍ≥Ñ ÏÉÅÏÑ±</span>
                                </div>
                                <div class="text-right">
                                    <span class="text-2xl font-black text-rose-600 dark:text-rose-400"
                                        x-text="dummyResult.details ? (dummyResult.details.chemistry_score * dummyWeights.chem * 300).toFixed(0) : '-'"></span>
                                    <span class="text-[10px] font-bold text-slate-400 block -mt-1">Impact pts</span>
                                </div>
                            </div>
                            <div
                                class="p-4 flex items-center justify-between group hover:bg-white dark:hover:bg-slate-800 transition-colors">
                                <div class="flex flex-col">
                                    <span
                                        class="text-[10px] font-black text-amber-500 uppercase tracking-widest leading-none mb-1">Activity</span>
                                    <span class="text-sm font-bold text-slate-700 dark:text-slate-200">ÎåÄÌôî Ïä§ÌÉÄÏùº</span>
                                    <span class="text-[10px] text-slate-400">ÎåÄÌôîÎüâ Î∞è ÏÜåÌÜµ ÏóêÎÑàÏßÄ Î†àÎ≤®</span>
                                </div>
                                <div class="text-right">
                                    <span class="text-2xl font-black text-amber-600 dark:text-amber-400"
                                        x-text="dummyResult.details ? (dummyResult.details.activity_score * dummyWeights.act * 300).toFixed(0) : '-'"></span>
                                    <span class="text-[10px] font-bold text-slate-400 block -mt-1">Impact pts</span>
                                </div>
                            </div>
                        </div>

                    </div>

                    <!-- [NEW] Radar Chart Container - Force Block Display -->
                    <div class="mt-8 relative w-full h-72">
                        <canvas id="matchRadarChart"></canvas>
                    </div>

                    <div class="text-xs text-slate-400 text-center mt-4">
                        * Í∞ÄÏ§ëÏπò Ï°∞Ï†ï Ïãú Ïã§ÏãúÍ∞ÑÏúºÎ°ú ÏóÖÎç∞Ïù¥Ìä∏Îê©ÎãàÎã§.
                    </div>
                </div>
                <template x-if="!dummyResult && !loading">
                    <div class="flex flex-col items-center justify-center py-12 text-slate-400">
                        <div class="text-4xl mb-2">‚åõ</div>
                        <p class="text-sm">ÏÇ¨Ïö©Ïûê 2Î™ÖÏùÑ ÏÑ†ÌÉùÌïòÎ©¥ Í≤∞Í≥ºÍ∞Ä ÌëúÏãúÎê©ÎãàÎã§.</p>
                    </div>
                </template>
                <template x-if="loading">
                    <div class="flex flex-col items-center justify-center py-12 text-indigo-500">
                        <div class="text-4xl mb-2 animate-spin">üåÄ</div>
                        <p class="text-sm font-bold">Í≥ÑÏÇ∞ Ï§ë...</p>
                    </div>
                </template>
            </div>
        </div>
    </div>


    <!-- 2. ÏÇ¨Ïö©Ïûê Î™©Î°ù (Middle) -->
    <div class="glass-panel p-6 rounded-2xl border border-slate-100">
        <div class="flex flex-col h-[500px]">
            <div class="flex justify-between items-center mb-4">
                <h3 class="font-bold text-lg text-slate-800 dark:text-white">üìã ÏÇ¨Ïö©Ïûê Î™©Î°ù (ÏÑ†ÌÉù)</h3>
                <div class="flex items-center gap-2">
                    <input type="text" x-model="searchQuery" @input="onSearchInput" placeholder="Ïù¥Î¶Ñ/ID Í≤ÄÏÉâ..."
                        class="text-sm px-3 py-1.5 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 w-64">
                    <span class="text-xs text-slate-500 dark:text-slate-400" x-text="candidates.length + 'Î™Ö'"></span>
                </div>
            </div>

            <div
                class="bg-indigo-50/50 dark:bg-slate-800/40 rounded-xl p-3 flex-1 overflow-y-auto custom-scrollbar border border-indigo-100 dark:border-slate-700/50 transition-colors">
                <template x-if="candidates.length === 0">
                    <div class="text-center text-slate-500 py-20">
                        <span class="text-4xl block mb-2">üîç</span>
                        <span x-text="loading ? 'Î°úÎî© Ï§ë...' : 'Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§'"></span>
                    </div>
                </template>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
                    <template x-for="user in candidates" :key="user.user_id">
                        <div class="bg-white dark:bg-slate-800 rounded-lg hover:shadow-md hover:border-indigo-200 dark:hover:border-indigo-800 dark:hover:bg-slate-700 transition-all border border-slate-200 dark:border-slate-700/50 cursor-pointer group relative overflow-hidden"
                            :class="selectedIds.includes(user.user_id) ? 'border-indigo-500 dark:border-indigo-400 ring-1 ring-indigo-500 dark:ring-indigo-400 bg-indigo-50 dark:bg-slate-700' : ''"
                            @click="toggleSelect(user.user_id)">

                            <!-- ÏÑ†ÌÉù ÌëúÏãú Î∞∞ÏßÄ -->
                            <div class="absolute top-0 right-0 p-2" x-show="selectedIds.includes(user.user_id)">
                                <span
                                    class="w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shadow-sm"
                                    :class="selectedIds.indexOf(user.user_id) === 0 ? 'bg-indigo-600 text-white' : 'bg-indigo-600 text-white'">
                                    <span x-text="selectedIds.indexOf(user.user_id) === 0 ? 'A' : 'B'"></span>
                                </span>
                            </div>

                            <div class="p-3 flex items-center gap-3">
                                <div
                                    class="flex-shrink-0 w-10 h-10 rounded-full bg-slate-100 dark:bg-slate-600 flex items-center justify-center text-sm font-bold text-slate-500 dark:text-slate-300 group-hover:bg-indigo-100 dark:group-hover:bg-slate-500 group-hover:text-indigo-600 dark:group-hover:text-white transition-colors">
                                    <span x-text="user.username.charAt(0).toUpperCase()"></span>
                                </div>
                                <div class="min-w-0 flex-1">
                                    <div class="flex items-center gap-2">
                                        <span class="text-slate-900 dark:text-white font-medium text-sm truncate"
                                            x-text="user.nickname || user.username"></span>
                                        <span x-show="user.is_dummy"
                                            class="px-1.5 py-0.5 rounded text-[10px] bg-indigo-50 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-200 border border-indigo-100 dark:border-indigo-700">Dummy</span>
                                    </div>
                                    <div class="text-slate-500 dark:text-slate-400 text-xs truncate"
                                        x-text="user.email"></div>
                                    <!-- Personality Badges in List -->
                                    <div class="flex gap-1 mt-1.5" x-show="user.mbti || user.socionics">
                                        <span x-show="user.mbti" x-text="user.mbti"
                                            class="px-1.5 py-0.5 rounded text-[10px] font-bold bg-slate-100 dark:bg-slate-700 text-indigo-600 dark:text-indigo-300 border border-slate-200 dark:border-slate-600"></span>
                                        <span x-show="user.socionics" x-text="user.socionics"
                                            class="px-1.5 py-0.5 rounded text-[10px] font-bold bg-slate-100 dark:bg-slate-700 text-rose-600 dark:text-rose-300 border border-slate-200 dark:border-slate-600"></span>
                                    </div>
                                    <div class="text-slate-500 text-[10px] mt-1">ID: <span x-text="user.user_id"></span>
                                    </div>
                                </div>

                                <!-- ÎçîÎØ∏ ÏÇ≠Ï†ú Î≤ÑÌäº -->
                                <button x-show="user.is_dummy" @click.stop="deleteDummy(user.user_id)"
                                    class="text-slate-600 hover:text-red-400 p-2 rounded transition-colors z-10"
                                    title="ÎçîÎØ∏ ÏÇ≠Ï†ú">
                                    üóëÔ∏è
                                </button>
                            </div>
                        </div>
                    </template>
                </div>
            </div>
        </div>
    </div>


    <!-- 3. ÎçîÎØ∏ ÏÉùÏÑ± (Bottom) -->
    <div class="glass-panel p-6 rounded-2xl border border-indigo-100">
        <h2 class="text-xl font-bold text-slate-800 mb-6 flex items-center gap-2">
            üìù ÎçîÎØ∏ ÏÇ¨Ïö©Ïûê ÏÉùÏÑ±
            <span class="text-xs font-normal text-slate-500">(ÌÖåÏä§Ìä∏Ïö© Í∞ÄÏÉÅ Îç∞Ïù¥ÌÑ∞)</span>
        </h2>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Left Column: Manual Creation -->
            <div class="space-y-4">
                <div class="flex items-center gap-2 mb-2">
                    <span
                        class="bg-indigo-100 dark:bg-indigo-900/40 text-indigo-700 dark:text-indigo-300 p-1.5 rounded-lg text-lg">‚úçÔ∏è</span>
                    <h4 class="font-bold text-slate-700 dark:text-slate-200">ÏßÅÏ†ë ÏÉùÏÑ± (Manual)</h4>
                </div>

                <div
                    class="bg-white dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm space-y-4">
                    <div>
                        <label class="block text-sm font-bold text-slate-700 dark:text-slate-300 mb-1">Ïù¥Î¶Ñ</label>
                        <input type="text" x-model="formData.name"
                            class="w-full rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white shadow-sm focus:border-indigo-500 focus:ring-indigo-500 font-bold"
                            placeholder="ÏÉùÏÑ±Ìï† Ïù¥Î¶Ñ ÏûÖÎ†•">
                    </div>

                    <div class="grid grid-cols-2 gap-3">
                        <div>
                            <label class="block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1">MBTI</label>
                            <select x-model="formData.mbti"
                                class="w-full text-sm rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-indigo-500">
                                <template x-for="type in mbtiTypes" :key="type">
                                    <option :value="type" x-text="type" class="dark:bg-slate-900"></option>
                                </template>
                            </select>
                        </div>
                        <div>
                            <label
                                class="block text-xs font-bold text-slate-500 dark:text-slate-400 mb-1">Socionics</label>
                            <select x-model="formData.socionics"
                                class="w-full text-sm rounded-lg border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-indigo-500">
                                <template x-for="type in socionicsTypes" :key="type">
                                    <option :value="type" x-text="type" class="dark:bg-slate-900"></option>
                                </template>
                            </select>
                        </div>
                    </div>

                    <div>
                        <label class="block text-xs font-bold text-slate-500 dark:text-slate-400 mb-2">Big5 ÏÑ±Í≤©
                            (0-100)</label>
                        <div
                            class="space-y-3 bg-slate-50 dark:bg-slate-900/50 p-3 rounded-lg border border-slate-100 dark:border-slate-700">
                            <template x-for="(val, key) in formData.big5">
                                <div class="flex items-center gap-3">
                                    <span class="text-[10px] font-bold text-slate-600 dark:text-slate-400 w-12"
                                        x-text="getBig5Label(key)"></span>
                                    <input type="range" min="0" max="100" x-model.number="formData.big5[key]"
                                        class="flex-1 h-1.5 bg-slate-200 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer"
                                        :title="getBig5Tooltip(key, val)">
                                    <span class="text-xs w-6 text-right font-mono dark:text-slate-300"
                                        x-text="val"></span>
                                </div>
                            </template>
                        </div>
                    </div>

                    <div>
                        <div class="flex justify-between text-xs font-bold text-slate-500 dark:text-slate-400 mb-1">
                            <span>ÌôúÎèôÏÑ± (Line Count)</span>
                            <span class="text-indigo-600 dark:text-indigo-400" x-text="formData.activity"></span>
                        </div>
                        <input type="range" min="50" max="3000" step="50" x-model.number="formData.activity"
                            class="w-full h-2 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg appearance-none cursor-pointer hover:bg-indigo-200 dark:hover:bg-indigo-800 transition-colors">
                    </div>

                    <button @click="createDummy" :disabled="loading || !formData.name"
                        class="w-full py-3 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition-colors disabled:opacity-50 shadow-md flex items-center justify-center gap-2 mt-2">
                        <span>üíæ</span> ÏÉùÏÑ±ÌïòÍ∏∞
                    </button>
                </div>
            </div>

            <!-- Right Column: Quick Actions -->
            <div class="space-y-6">

                <!-- Random Creation -->
                <div>
                    <div class="flex items-center gap-2 mb-2">
                        <span
                            class="bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 p-1.5 rounded-lg text-lg">üé≤</span>
                        <h4 class="font-bold text-slate-700 dark:text-slate-200">ÎûúÎç§ ÏÉùÏÑ± (Random)</h4>
                    </div>
                    <div
                        class="bg-purple-50 dark:bg-purple-900/20 p-5 rounded-xl border border-purple-100 dark:border-purple-800/30 space-y-4">
                        <p class="text-xs text-purple-800 dark:text-purple-300/80 leading-relaxed">
                            Î¨¥ÏûëÏúÑ ÏÑ±Í≤©Í≥º ÌîÑÎ°úÌïÑÏùÑ Í∞ÄÏßÑ ÎçîÎØ∏ ÏÇ¨Ïö©ÏûêÎ•º Îπ†Î•¥Í≤å ÏÉùÏÑ±Ìï©ÎãàÎã§.
                        </p>
                        <div class="flex gap-2">
                            <input type="number" x-model.number="randomCount" min="1" max="50"
                                class="w-20 rounded-xl border-purple-200 dark:border-purple-900 bg-white dark:bg-slate-900 text-slate-900 dark:text-white shadow-sm focus:border-purple-500 focus:ring-purple-500 text-center text-lg font-bold"
                                placeholder="Qty">
                            <button @click="createRandomDummy" :disabled="loading"
                                class="flex-1 py-3 bg-purple-600 text-white font-bold rounded-xl hover:bg-purple-700 transition-all shadow-md flex items-center justify-center gap-2">
                                <span>‚ú®</span> ÎûúÎç§ ÏùºÍ¥Ñ ÏÉùÏÑ±
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Bulk Delete -->
                <div>
                    <div class="flex items-center gap-2 mb-2">
                        <span
                            class="bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-300 p-1.5 rounded-lg text-lg">üóëÔ∏è</span>
                        <h4 class="font-bold text-slate-700 dark:text-slate-200">ÏùºÍ¥Ñ ÏÇ≠Ï†ú (Bulk Delete)</h4>
                    </div>
                    <div
                        class="bg-red-50 dark:bg-red-900/20 p-5 rounded-xl border border-red-100 dark:border-red-900/30 space-y-4">
                        <div class="flex gap-2">
                            <select x-model="bulkDeleteOrder"
                                class="flex-1 text-sm font-bold text-slate-700 dark:text-slate-300 bg-white dark:bg-slate-900 border border-red-200 dark:border-red-900/50 rounded-xl focus:ring-red-500 py-3 pl-3">
                                <option value="recent">ÏµúÍ∑º ÏÉùÏÑ±Ïàú</option>
                                <option value="oldest">Ïò§ÎûòÎêú Ïàú</option>
                            </select>
                            <input type="number" x-model.number="bulkDeleteCount" min="1" max="100"
                                class="w-20 rounded-xl border-red-200 dark:border-red-900/50 bg-white dark:bg-slate-900 text-slate-900 dark:text-white shadow-sm focus:ring-red-500 text-center text-lg font-bold py-2"
                                placeholder="Qty">
                        </div>
                        <button @click="deleteBulkDummies" :disabled="loading"
                            class="w-full py-3 bg-white dark:bg-slate-900 border-2 border-red-200 dark:border-red-900/30 text-red-600 dark:text-red-400 font-bold rounded-xl hover:bg-red-500 dark:hover:bg-red-600 hover:text-white hover:border-red-500 dark:hover:border-red-600 transition-all shadow-sm flex items-center justify-center gap-2">
                            <span>üî•</span> ÏÇ≠Ï†ú Ïã§Ìñâ
                        </button>
                    </div>
                </div>

            </div>
        </div>
    </div>

</div> <!-- End Matching Tab Inner -->
</div>