{% extends "base.html" %}

{% block title %}ì¸ë°•ìŠ¤{% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto py-8">
    <h1 class="text-3xl font-extrabold text-slate-900 mb-8">ì¸ë°•ìŠ¤</h1>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">

        <!-- ì™¼ìª½: ë§¤ì¹­ ìš”ì²­ ê´€ë¦¬ -->
        <div class="space-y-8">
            <!-- ë°›ì€ ìš”ì²­ -->
            <section class="glass-panel p-6 rounded-xl">
                <h2 class="text-lg font-bold text-slate-900 mb-4 flex items-center">
                    <span class="mr-2">ğŸ“¥</span> ë°›ì€ ë§¤ì¹­ ì‹ ì²­
                </h2>
                {% if requests %}
                <ul class="divide-y divide-slate-100">
                    {% for req in requests %}
                    <li class="py-4 flex justify-between items-center">
                        <div>
                            <p class="text-sm font-medium text-slate-900">{{ req.sender_nickname }} ({{ req.sender_name
                                }})</p>
                            <p class="text-xs text-slate-500">{{ req.created_at.strftime('%Y-%m-%d %H:%M') }}</p>
                        </div>
                        <div class="flex space-x-2">
                            <a href="{{ url_for('respond_match', request_id=req.request_id, action='accepted') }}"
                                class="inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded text-indigo-700 bg-indigo-100 hover:bg-indigo-200">
                                ìˆ˜ë½
                            </a>
                            <a href="{{ url_for('respond_match', request_id=req.request_id, action='rejected') }}"
                                class="inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded text-red-700 bg-red-100 hover:bg-red-200">
                                ê±°ì ˆ
                            </a>
                        </div>
                    </li>
                    {% endfor %}
                </ul>
                {% else %}
                <p class="text-sm text-slate-500 text-center py-4">ë°›ì€ ì‹ ì²­ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                {% endif %}
            </section>

            <!-- ë³´ë‚¸ ìš”ì²­ í˜„í™© -->
            <section class="glass-panel p-6 rounded-xl">
                <h2 class="text-lg font-bold text-slate-900 mb-4 flex items-center">
                    <span class="mr-2">ğŸ“¤</span> ë³´ë‚¸ ì‹ ì²­ í˜„í™©
                </h2>
                {% if sent_requests %}
                <ul class="divide-y divide-slate-100">
                    {% for req in sent_requests %}
                    <li class="py-4 flex justify-between items-center">
                        <div>
                            <p class="text-sm font-medium text-slate-900">{{ req.receiver_nickname }} ë‹˜ì—ê²Œ</p>
                            <p class="text-xs text-slate-500">{{ req.created_at.strftime('%Y-%m-%d') }}</p>
                        </div>
                        <div>
                            {% if req.status == 'ACCEPTED' %}
                            <span
                                class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">ìˆ˜ë½ë¨</span>
                            {% elif req.status == 'REJECTED' %}
                            <span
                                class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">ê±°ì ˆë¨</span>
                            {% else %}
                            <span
                                class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">ëŒ€ê¸°ì¤‘</span>
                            {% endif %}
                        </div>
                    </li>
                    {% endfor %}
                </ul>
                {% else %}
                <p class="text-sm text-slate-500 text-center py-4">ë³´ë‚¸ ì‹ ì²­ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                {% endif %}
            </section>
        </div>

        <!-- ì˜¤ë¥¸ìª½: ì•Œë¦¼ -->
        <div class="h-full">
            <section class="glass-panel p-6 rounded-xl h-full">
                <h2 class="text-lg font-bold text-slate-900 mb-4 flex items-center">
                    <span class="mr-2">ğŸ””</span> ì‹œìŠ¤í…œ ì•Œë¦¼
                </h2>
                {% if alerts %}
                <ul class="space-y-4">
                    {% for alert in alerts %}
                    <li class="bg-indigo-50/50 p-4 rounded-lg border border-indigo-100">
                        <p class="text-sm text-slate-800">{{ alert.message }}</p>
                        <p class="text-xs text-slate-400 mt-2 text-right">{{ alert.created_at.strftime('%Y-%m-%d %H:%M')
                            }}</p>
                    </li>
                    {% endfor %}
                </ul>
                {% else %}
                <div class="text-center py-20 text-slate-400">
                    <div class="text-4xl mb-2">ğŸ“­</div>
                    <p>ìƒˆë¡œìš´ ì•Œë¦¼ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                </div>
                {% endif %}
            </section>
        </div>

    </div>
</div>
{% endblock %}