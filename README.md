# 🧠 EchoMind (에코마인드)

**EchoMind**는 카카오톡 대화 내역을 분석하여 사용자의 **성격(Big5)**과 **대화 스타일**을 AI로 진단하고, 이를 바탕으로 가장 잘 맞는 친구를 추천해주는 **AI 페르소나 매칭 시스템**입니다.



## 🚀 주요 기능

1.  **AI 대화 분석** (`Main Analysis`)
    *   카카오톡 내보내기 파일(`.txt`)을 업로드하면 GPT-4o/mini 모델이 대화 내용을 심층 분석합니다.
    *   **Big5 성격 특성**: 개방성, 성실성, 외향성, 우호성, 신경성
    *   **커뮤니케이션 스타일**: 어조, 직설성, 감정표현, 공감, 주도성, 갈등관리
    *   **통계 지표**: 대화 점유율, 평균 답장 시간(Latency), 독성(비속어) 지수 등

2.  **데이터 시각화** (`Visual Dashboard`)
    *   분석된 성격과 스타일을 **레이더 차트(Radar Chart)**로 한눈에 보여줍니다.
    *   분석 결과는 JSON 파일로 다운로드하여 소장할 수 있습니다.

3.  **베스트 파트너 매칭** (`Matching System`)
    *   나의 성격 프로필과 DB(`candidates/` 폴더)에 있는 친구들의 프로필을 비교합니다.
    *   성격 궁합, 대화 스타일 유사도, 티키타카(답장 속도 등), 관심사 일치도를 종합하여 **Top 5 파트너**를 추천합니다.

---

## 🛠️ 설치 및 실행 방법 (How to Run)

### 1. 사전 준비
*   **Python 3.10 이상**이 설치되어 있어야 합니다.
*   **OpenAI API Key 설정**:
    *   프로젝트 폴더에 `.env` 파일을 생성하고 아래와 같이 키를 입력하세요.
    ```bash
    OPENAI_API_KEY=sk-your-api-key-here
    ```
    *   (또는 UI 실행 후 사이드바에서 키를 직접 입력해도 됩니다)

### 2. 라이브러리 설치
프로젝트 폴더에서 아래 명령어를 실행하여 필요한 패키지를 설치하세요.
```bash
pip install -r requirements.txt
```

### 3. 프로그램 실행 (Web UI)
가장 쉽고 강력한 실행 방법입니다.
```bash
streamlit run app.py
```
*   명령어를 실행하면 자동으로 브라우저가 열리며 진행됩니다.
*   **분석하기 탭**: '대화 분석'을 선택해 카톡 파일을 올리거나, '프로필 불러오기'로 기존 JSON을 올리세요.
*   **매칭하기 탭**: 분석이 완료되면 내 프로필을 기준으로 최적의 파트너를 찾아줍니다.

---

## 📂 파일 구조 설명

| 파일/폴더 | 설명 |
| :--- | :--- |
| **`app.py`** | **[메인]** Streamlit 기반 웹 UI 소스코드. 사용자는 이 파일만 실행하면 됩니다. |
| **`main.py`** | **[핵심 로직]** 카카오톡 파싱, 통계 계산, LLM API 연동 등 분석 엔진이 들어있습니다. |
| **`recommend.py`** | **[매칭 로직]** 두 프로필 간의 유클리드 거리, 스타일 유사도를 계산하는 알고리즘 파일입니다. |
| `config.py` | 프로그램 설정값 (가중치, 상수 등) 관리 |
| `requirements.txt` | 설치 필요한 파이썬 라이브러리 목록 |
| `candidates/` | (폴더) 매칭 대상이 되는 친구들의 프로필 JSON 파일들이 저장되는 곳입니다. |
| `korean_bad_words.json` | 독성(욕설) 분석을 위한 비속어 데이터베이스 |
| `SentiWord_info.json` | (선택) 감성 분석용 사전 데이터 |
| `.env` | (보안) OPENAI_API_KEY 등 환경변수 저장 파일 |

---

## ⚙️ 작동 원리 (Architecture)

1.  **Parsing**: 카카오톡 텍스트 파일을 정규표현식으로 파싱하여 `[시간, 발화자, 메시지]` 형태로 구조화합니다. (Android/PC/iOS 포맷 호환)
2.  **Preprocessing**: 시스템 메시지(사진, 이모티콘 등)를 제거하고, PII(개인정보) 마스킹 등 전처리를 수행합니다.
3.  **LLM Analysis**: 전처리된 대화 내용을 OpenAI API(Structured Outputs)에 보내 JSON 포맷으로 성격 프로필을 추출합니다.
4.  **Matching Algorithm**:
    *   **성격(Big5)**: 벡터 거리 계산 (비슷할수록 호감? 혹은 반대 성향 보완? -> 현재 로직은 유사성 기반)
    *   **스타일**: 6가지 지표의 유사도 평균
    *   **관심사**: 키워드 교집합 개수
    *   **종합 점수**: 가중치(`WEIGHT_...`)를 적용하여 100점 만점으로 환산


---

## � 분석 및 매칭 로직 상세 (Deep Dive)

EchoMind는 **AI의 정성적 판단**과 **알고리즘의 정량적 계산**을 결합하여 결과를 도출합니다.

### 1. 분석 지표의 출처 (AI vs Code)

| 구분 | 생성 주체 | 설명 |
| :--- | :--- | :--- |
| **Big5 성격** | **AI (LLM)** | 대화의 뉘앙스를 파악하여 5가지 성격 특성을 0.0~1.0 점수로 추론 |
| **대화 스타일** | **AI (LLM)** | 말투, 공감 능력, 갈등 해결 방식 등을 0.0~1.0 점수로 추론 |
| **관심사 키워드** | **AI (LLM)** | 대화 주제 중 가장 핵심적인 명사 키워드 5개 추출 |
| **대화 통계** | **Code (Python)** | 답장 시간, 메시지 길이, 물음표 빈도 등을 직접 계산 |
| **독성 지수** | **Code (Python)** | 욕설 사전을 기반으로 비속어 포함 비율 계산 |

### 2. 주요 수치 설명 (0.0 ~ 1.0)

#### 🧠 Big5 성격 (Ocean Model)
*   **개방성 (Openness)**: 새로운 경험과 지적 호기심 (↔ 보수적)
*   **성실성 (Conscientiousness)**: 계획적이고 책임감 있는 태도 (↔ 즉흥적)
*   **외향성 (Extraversion)**: 사교적이고 에너지가 넘침 (↔ 내향적)
*   **우호성 (Agreeableness)**: 타인을 배려하고 협조적 (↔ 비판적/경쟁적)
*   **신경성 (Neuroticism)**: 감정 기복이 있고 예민함 (↔ 정서적 안정)

#### 🗣️ 커뮤니케이션 스타일
*   **어조 (Tone)**: 1.0에 가까울수록 격식 있고 정중함 (0.0은 친근/캐주얼)
*   **직설성 (Directness)**: 돌려 말하지 않고 명확하게 의사 표현
*   **감정표현 (Emotion)**: ㅋㅋㅋ, 이모티콘 등 감정을 풍부하게 드러냄
*   **공감반응 (Empathy)**: 상대방의 말에 호응하고 맞장구치는 빈도
*   **주도성 (Initiative)**: 대화 주제를 먼저 꺼내거나 이끌어가는 성향

### 3. 매칭 점수 계산 방식 (Total Score)
나와 상대방의 **유사도(거리)**를 계산하여 총 100점 만점으로 환산합니다. 현재 로직은 **"나와 성향이 비슷한 사람"**을 찾는 데 최적화되어 있습니다.


1.  **성격(35점)**: Big5 각 항목의 유클리드 거리 역산 (차이가 적을수록 고득점)
2.  **스타일(35점)**: 6가지 스타일 지표의 평균 유사도
3.  **패턴(20점)**: 답장 속도(Latency)와 질문 빈도의 유사성 (티키타카 지수)
4.  **관심사(10점)**: 겹치는 키워드 개수 (3개 이상 겹치면 만점)
